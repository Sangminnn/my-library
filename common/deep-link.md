# DeepLink

- 딥링크는 웹과 마찬가지로 앱에서 **링크에 해당하는 컨텐츠로 이동**시킬 수 있는 링크

- 성공하는 프로덕트에 필요 조건 = 유저가 고민할 필요가 없고, 편하게 해야함
  → 딥링크는 우리가 보내고싶은, 유저가 이동하겠다고 선택한 지면으로 바로 보내주는 점에서 반드시 필요

딥링크 관련 키워드

1. URI Scheme
2. App Link
3. Universal Link

```jsx
${scheme}://${path}${parameter}

// URI Scheme은 이미 기본 앱에도 적용되어있음

sms:// - 문자
tel:// - 전화
mailto:// - 메일
geo:// - 위치/지도
market:// - 앱마켓

```

다만 이 부분은 앱이 설치되어있을때만 사용할 수 있음.

→ 미설치 유저까지 후킹하기에는 어려움이 있다.

또한 스킴은 누구나 만들 수 있기때문에 동일한 스킴을 사용하여 악용하는 케이스도 존재

→ 같은 스킴일 경우, AOS는 어떤 앱으로 열지 선택하는 팝업이 나타나고, IOS는 마지막에 설치한 앱이 나타난다.

---

## App Link / Universal Link

- 고유한 웹사이트 도메인으로 만들어져 유일함
- 해당 도메인이 앱의 소유자라는 것을 인증해주어야함

1. 앱이 설치됨 - 해당 딥링크에 맞는 화면 실행
2. 설치되어있지 않음 - 웹 URl로 인식되어 웹 링크 오픈

다만 일부 상황에서 동작하지 않음

## Deferred Deeplink

- **앱이 설치되어 있으면**: 앱이 바로 열리면서 해당 컨텐츠 실행
- **앱이 설치되어 있지 않으면**: 딥링크 동작을 지연시켰다가 앱설치이후 실행되었을때 해당 컨텐츠를 실행

따라서 앱을 처음 설치해서 실행한 사용자도 이전에 보여주려고 했던 컨텐츠를 앱 실행 직후에 보여줄 수 있게 된다.

이를 위해 사용하는 플랫폼이 Firebase, AppsFlyer 임

Dynamic Link의 Deferred Deeplink를 통해 구글 플레이 앱 설치 화면에 유입된 경우

**→ [열기] 대신 [계속] 으로 표시된다.**

## One Link 구현 원리

1. 앱이 설치되어있지 않은 사용자가 클릭할 경우 AppsFlyer의 DB에 해당 사용자가 클릭한 링크 정보를 저장
2. 앱을 설치하고 진행
3. 앱이 실행되었을 때 AppsFlyer의 SDK로부터 딥링크 정보가 있는지를 observe
4. AppsFlyer의 DB에 저장한 정보가 있음을 인지하면 가져온 뒤 해당 딥링크 정보에 맞게 동작시킨다.
